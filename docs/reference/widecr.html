<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Wide format of competition results — widecr • comperes</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Wide format of competition results — widecr" />
<meta property="og:description" content="Functions for dealing with competition results in wide format." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">comperes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/formats.html">Formats of Competition Results</a>
    </li>
    <li>
      <a href="../articles/manipulation.html">Manipulate Competition Results</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/echasnovski/comperes">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Wide format of competition results</h1>
    <small class="dont-index">Source: <a href='https://github.com/echasnovski/comperes/blob/master/R/results-widecr.R'><code>R/results-widecr.R</code></a></small>
    <div class="hidden name"><code>widecr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Functions for dealing with competition results in wide format.</p>
    </div>

    <pre class="usage"><code class = "r"><span class='fu'>is_widecr</span>(<span class='no'>cr_data</span>)

<span class='fu'>as_widecr</span>(<span class='no'>cr_data</span>, <span class='kw'>repair</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for widecr</span>
<span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)</code></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>cr_data</th>
      <td><p>Data of competition results (convertible to tabular).</p></td>
    </tr>
    <tr>
      <th>repair</th>
      <td><p>Whether to repair input.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments to be passed to or from methods.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Object to be converted to <a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>is_widecr()</code> returns <code>TRUE</code> if its argument is appropriate object
of class <code>widecr</code>: it should inherit classes <code>widecr</code>, <code>tbl_df</code> (in other
words, to be <a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a>) and have complete pairs of
"player"-"score" columns where pair is detected by <strong>digits</strong> after strings
"player" and "score" respectively. Columns of "player" and "score" types
shouldn't have any extra symbols except type name and digits after it. All
other columns are considered as "extra columns".</p>
<p><code>as_widecr()</code> returns an object of class <code>widecr</code>.</p>
<p><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble()</a> applied to <code>widecr</code> object drops <code>widecr</code>
class.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>as_widecr()</code> is S3 method for converting data to <code>widecr</code>. When
using <strong>default</strong> method if <code>repair</code> is <code>TRUE</code> it also tries to fix
possible problems (see "Repairing"). If <code>repair</code> is <code>FALSE</code> it converts
<code>cr_data</code> to <a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a> and adds <code>widecr</code> class to it.</p>
<p>When applying <code>as_widecr()</code> to proper (check via <code><a href='longcr.html'>is_longcr()</a></code> is made)
<strong><code>longcr</code></strong> object, conversion is made:</p><ul>
<li><p>All columns except "game", "player" and "score" are dropped.</p></li>
<li><p>Conversion from long to wide format is made. The number of "player"-"score"
pairs is taken as the maximum number of players in game. If not all games are
played between the same number of players then there will be <code>NA</code>'s in some
pairs. Column <code>game</code> is preserved in output and is used for arranging in
increasing order.</p></li>
</ul>

<p>For appropriate <strong><code>widecr</code></strong> objects <code>as_widecr</code> returns its input  and
throws error otherwise.</p>
    <h2 class="hasAnchor" id="wide-format-of-competition-results"><a class="anchor" href="#wide-format-of-competition-results"></a>Wide format of competition results</h2>

    

<p>It is assumed that competition consists from multiple games (matches,
comparisons, etc.). One game can consist only from <strong>constant</strong> number
of players. Inside a game all players are treated equally.
In every game every player has some score: the value of arbitrary nature
that fully characterizes player's performance in particular game (in most
cases it is some numeric value).</p>
<p><code>widecr</code> inherits from <code>tibble</code>. Data should be organized in pairs of columns
"player"-"score". Identifier of a pair should go after respective keyword and
consist only from digits. For example: player1, score1, player2, score2.
Order doesn't matter. Extra columns are allowed.</p>
<p>To account for R standard string ordering, identifiers of pairs should be
formatted with leading zeros (when appropriate). For example: player01,
score01, ..., player10, score10.</p>
<p>Column <code>game</code> for game identifier is optional. If present it will be used in
conversion to <code>longcr</code> format via <code><a href='longcr.html'>as_longcr()</a></code>.</p>
    <h2 class="hasAnchor" id="repairing"><a class="anchor" href="#repairing"></a>Repairing</h2>

    

<p>Option <code>repair = TRUE</code> (default) in <code>as_widecr()</code> means that its result is
going to be repaired with following actions:</p><ul>
<li><p>Detect columns with names containing "player" or "score" (ignoring case).
All other columns are treated as "extra".</p></li>
<li><p>Extract first occurrence of "player" or "score" (ignoring case) from names
of detected columns. Everything after extracted word is treated as identifier
of "player"-"score" pair.</p></li>
<li><p>Convert these identifiers to numeric form with
<code><a href='https://rdrr.io/r/base/integer.html'>as.integer(as.factor(...))</a></code>.</p></li>
<li><p>Convert identifiers once again to character form with possible leading
zeros (to account for R standard string ordering).</p></li>
<li><p>Spread pairs to appropriate columns with possible column adding (which
were missed in original pairs based on information of pair identifier) with
<code>NA_integer_</code>.</p></li>
<li><p><strong>Note</strong> that if there is column <code>game</code> (exactly matched) it is placed as
first column.
<strong>Note</strong> that the order (and numeration) of pairs can change.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='longcr.html'>Long format</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class = "r"><div class='input'><span class='no'>cr_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
  <span class='kw'>playerA</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>,
  <span class='kw'>playerB</span> <span class='kw'>=</span> <span class='fl'>2</span>:<span class='fl'>11</span>,
  <span class='kw'>scoreC</span> <span class='kw'>=</span> <span class='fl'>11</span>:<span class='fl'>20</span>,
  <span class='kw'>scoreB</span> <span class='kw'>=</span> <span class='fl'>12</span>:<span class='fl'>21</span>,
  <span class='kw'>otherColumn</span> <span class='kw'>=</span>  <span class='fl'>101</span>:<span class='fl'>110</span>
)
<span class='no'>cr_data_wide</span> <span class='kw'>&lt;-</span> <span class='fu'>as_widecr</span>(<span class='no'>cr_data</span>, <span class='kw'>repair</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>as_widecr: Some matched names are not perfectly matched:</span>
#&gt; <span class='message'>  playerA -&gt; player1</span>
#&gt; <span class='message'>  playerB -&gt; player2</span>
#&gt; <span class='message'>  scoreB -&gt; score2</span>
#&gt; <span class='message'>  scoreC -&gt; score3</span></div><div class='output co'>#&gt; <span class='message'>as_widecr: Next columns are not found. Creating with NAs.</span>
#&gt; <span class='message'>  score1, player3</span></div><div class='input'>
<span class='fu'>is_widecr</span>(<span class='no'>cr_data_wide</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span>(<span class='no'>cr_data_wide</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 10 x 7</span><span>
#&gt;    player1 score1 player2 score2 player3 score3 otherColumn
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span>       1     </span><span style='color: #BB0000;'>NA</span><span>       2     12      </span><span style='color: #BB0000;'>NA</span><span>     11         101
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span>       2     </span><span style='color: #BB0000;'>NA</span><span>       3     13      </span><span style='color: #BB0000;'>NA</span><span>     12         102
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span>       3     </span><span style='color: #BB0000;'>NA</span><span>       4     14      </span><span style='color: #BB0000;'>NA</span><span>     13         103
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span>       4     </span><span style='color: #BB0000;'>NA</span><span>       5     15      </span><span style='color: #BB0000;'>NA</span><span>     14         104
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span>       5     </span><span style='color: #BB0000;'>NA</span><span>       6     16      </span><span style='color: #BB0000;'>NA</span><span>     15         105
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span>       6     </span><span style='color: #BB0000;'>NA</span><span>       7     17      </span><span style='color: #BB0000;'>NA</span><span>     16         106
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span>       7     </span><span style='color: #BB0000;'>NA</span><span>       8     18      </span><span style='color: #BB0000;'>NA</span><span>     17         107
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span>       8     </span><span style='color: #BB0000;'>NA</span><span>       9     19      </span><span style='color: #BB0000;'>NA</span><span>     18         108
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span>       9     </span><span style='color: #BB0000;'>NA</span><span>      10     20      </span><span style='color: #BB0000;'>NA</span><span>     19         109
#&gt; </span><span style='color: #BCBCBC;'>10</span><span>      10     </span><span style='color: #BB0000;'>NA</span><span>      11     21      </span><span style='color: #BB0000;'>NA</span><span>     20         110</div><div class='input'>
</div></span></code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#wide-format-of-competition-results">Wide format of competition results</a></li>
      <li><a href="#repairing">Repairing</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


