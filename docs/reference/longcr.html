<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Long format of competition results — longcr • comperes</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Long format of competition results — longcr" />
<meta property="og:description" content="Functions for dealing with competition results in long format." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">comperes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/formats.html">Formats of Competition Results</a>
    </li>
    <li>
      <a href="../articles/manipulation.html">Manipulate Competition Results</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/echasnovski/comperes/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Long format of competition results</h1>
    <small class="dont-index">Source: <a href='https://github.com/echasnovski/comperes/blob/master/R/results-longcr.R'><code>R/results-longcr.R</code></a></small>
    <div class="hidden name"><code>longcr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Functions for dealing with competition results in long format.</p>
    </div>

    <pre class="usage"><code class = "r"><span class='fu'>is_longcr</span><span class='op'>(</span><span class='va'>cr_data</span><span class='op'>)</span>

<span class='fu'>as_longcr</span><span class='op'>(</span><span class='va'>cr_data</span>, repair <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for longcr</span>
<span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span></code></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>cr_data</th>
      <td><p>Data of competition results (convertible to tabular).</p></td>
    </tr>
    <tr>
      <th>repair</th>
      <td><p>Whether to repair input.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments to be passed to or from methods.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Object to be converted to <a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>is_longcr()</code> returns <code>TRUE</code> if its argument is appropriate object of
class <code>longcr</code>: it should inherit classes <code>longcr</code>, <code>tbl_df</code> (in other
words, to be <a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a>) and have "game", "player", "score"
among column names.</p>
<p><code>as_longcr()</code> returns an object of class <code>longcr</code>.</p>
<p><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble()</a> applied to <code>longcr</code> object drops <code>longcr</code>
class.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>as_longcr()</code> is S3 method for converting data to <code>longcr</code>. When
using <strong>default</strong> method if <code>repair</code> is <code>TRUE</code> it also tries to fix possible
problems (see "Repairing"). If <code>repair</code> is <code>FALSE</code> it converts <code>cr_data</code> to
<a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a> and adds <code>longcr</code> class to it.</p>
<p>When applying <code>as_longcr()</code> to proper (check via <code><a href='widecr.html'>is_widecr()</a></code> is made)
<strong><code>widecr</code></strong> object, conversion is made:</p><ul>
<li><p>If there is column <code>game</code> then it is used as game identifier. Else
treat every row as separate game data.</p></li>
<li><p>Every "player"-"score" pair for every game is converted to separate row
with adding the appropriate extra columns.</p></li>
<li><p>Result is arranged by <code>game</code> and identifier of a "player"-"score" pair
(extra symbols after "player" and "score" strings in input column names) in
increasing order.</p></li>
<li><p>If <code>repair</code> is <code>TRUE</code> then repair is done.</p></li>
</ul>

<p>For appropriate <strong><code>longcr</code></strong> objects <code>as_longcr()</code> returns its input and
throws error otherwise.</p>
    <h2 class="hasAnchor" id="long-format-of-competition-results"><a class="anchor" href="#long-format-of-competition-results"></a>Long format of competition results</h2>

    

<p>It is assumed that competition consists from multiple games (matches,
comparisons, etc.). One game can consist from <strong>variable</strong> number of
players. Inside a game all players are treated equally.
In every game every player has some score: the value of arbitrary nature
that fully characterizes player's performance in particular game (in most
cases it is some numeric value).</p>
<p><code>longcr</code> inherits from <code>tibble</code>. Data should have at least three columns with
the following names:</p><ul>
<li><p><code>game</code> - game identifier.</p></li>
<li><p><code>player</code> - player identifier.</p></li>
<li><p><code>score</code> - score of particular player in particular game.</p></li>
</ul>

<p>Extra columns are allowed. <strong>Note</strong> that if object is converted to
<a href='widecr.html'>widecr</a>, they will be dropped. So it is better to store
extra information about "game"-"player" pair as list-column "score" which
will stay untouched.</p>
    <h2 class="hasAnchor" id="repairing"><a class="anchor" href="#repairing"></a>Repairing</h2>

    

<p>Option <code>repair = TRUE</code> (default) in <code>as_longcr()</code> means that its result is
going to be repaired with following actions:</p><ul>
<li><p>Detect columns exactly matching "game", "player" or "score". Those are used
in the output. If all are detected matched columns are put in the beginning.
Other columns are preserved.</p></li>
<li><p>If not all columns were exactly matched, detect first columns with names
containing "game", "player" or "score" (ignoring case). If there are many
matching names for one output name then the first one is used. In case of
imperfect match, message is given. All other columns are treated as "extra".</p></li>
<li><p>If some legitimate names aren't detected, respective columns are created
and filled with <code>NA_integer_</code>. Also a message is given.</p></li>
<li><p>If in one game some player listed more than once, the first record is
taken.</p></li>
<li><p>Return the tibble with at least 3 appropriate for <code>longcr</code> columns and
column names.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='widecr.html'>Wide format</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class = "r"><div class='input'><span class='co'># Repairing example</span>
<span class='va'>cr_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  playerscoregame_ID <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, times <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>,
  gameId <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, each <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>,
  scoreS <span class='op'>=</span> <span class='fl'>31</span><span class='op'>:</span><span class='fl'>40</span>,
  scoreSS <span class='op'>=</span> <span class='fl'>41</span><span class='op'>:</span><span class='fl'>50</span>
<span class='op'>)</span>
<span class='va'>cr_data_long</span> <span class='op'>&lt;-</span> <span class='fu'>as_longcr</span><span class='op'>(</span><span class='va'>cr_data</span>, repair <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>as_longcr: Some matched names are not perfectly matched:</span>
#&gt; <span class='message'>  gameId -&gt; game</span>
#&gt; <span class='message'>  playerscoregame_ID -&gt; player</span>
#&gt; <span class='message'>  scoreS -&gt; score</span></div><div class='input'>
<span class='fu'>is_longcr</span><span class='op'>(</span><span class='va'>cr_data_long</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='va'>cr_data_long</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 10 x 4</span><span>
#&gt;     game player score scoreSS
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span>     1      1    31      41
#&gt; </span><span style='color: #555555;'> 2</span><span>     1      2    32      42
#&gt; </span><span style='color: #555555;'> 3</span><span>     2      3    33      43
#&gt; </span><span style='color: #555555;'> 4</span><span>     2      4    34      44
#&gt; </span><span style='color: #555555;'> 5</span><span>     3      5    35      45
#&gt; </span><span style='color: #555555;'> 6</span><span>     3      1    36      46
#&gt; </span><span style='color: #555555;'> 7</span><span>     4      2    37      47
#&gt; </span><span style='color: #555555;'> 8</span><span>     4      3    38      48
#&gt; </span><span style='color: #555555;'> 9</span><span>     5      4    39      49
#&gt; </span><span style='color: #555555;'>10</span><span>     5      5    40      50</div></span></code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


