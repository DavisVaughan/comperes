<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manage Competition Results • comperes</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<script src="extra.js"></script><meta property="og:title" content="Manage Competition Results">
<meta property="og:description" content="Tools for storing and managing competition results.
    Competition is understood as a set of games in which players gain some
    abstract scores.  There are two ways for storing results: in long (one
    row per game-player) and wide (one row per game with fixed amount of
    players) formats. This package provides functions for creation and
    conversion between them. Also there are functions for computing their
    summary and Head-to-Head values for players. They leverage grammar of
    data manipulation from dplyr.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">comperes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/formats.html">Formats of Competition Results</a>
    </li>
    <li>
      <a href="articles/manipulation.html">Manipulate Competition Results</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/echasnovski/comperes/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="comperes-manage-competition-results" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#comperes-manage-competition-results" class="anchor"></a>comperes: Manage Competition Results</h1></div>

<p><code>comperes</code> offers a pipe (<code><a href="reference/pipe.html">%&gt;%</a></code>) friendly set of tools for storing and managing competition results. Understanding of <strong>competition</strong> is quite general: it is a set of <strong>games</strong> (abstract event) in which <strong>players</strong> (abstract entity) gain some abstract <strong>scores</strong> (typically numeric). The most natural example is sport results, however not the only one. For example, product rating can be considered as a competition between products as “players”. Here a “game” is a customer that reviews a set of products by rating them with numerical “score” (stars, points, etc.).</p>
<p>This package leverages <a href="http://dplyr.tidyverse.org">dplyr</a>’s grammar of data manipulation. Only basic knowledge is enough to use <code>comperes</code>.</p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><code>comperes</code> provides the following functionality:</p>
<ul>
<li>
<strong>Store and convert</strong> competition results:
<ul>
<li>In <em>long format</em> as a <a href="http://tibble.tidyverse.org">tibble</a> with one row per game-player pair. Functions: <code><a href="reference/longcr.html">as_longcr()</a></code>, <code><a href="reference/longcr.html">is_longcr()</a></code>.</li>
<li>In <em>wide format</em> as a <code>tibble</code> with one row per game with fixed amount of players. Functions: <code><a href="reference/widecr.html">as_widecr()</a></code>, <code><a href="reference/widecr.html">is_widecr()</a></code>.</li>
</ul>
</li>
<li>
<strong>Summarise</strong>:
<ul>
<li>Compute <em>item summaries</em> with functions using <code>dplyr</code>’s grammar. Functions: <code><a href="reference/item-summary.html">summarise_item()</a></code>, <code><a href="reference/item-summary.html">summarise_game()</a></code>, <code><a href="reference/item-summary.html">summarise_player()</a></code>.</li>
<li>Compute and <em>join</em> item summaries to data for easy transformation. Functions: <code><a href="reference/item-summary-join.html">join_item_summary()</a></code>, <code><a href="reference/item-summary-join.html">join_game_summary()</a></code>, <code><a href="reference/item-summary-join.html">join_player_summary()</a></code>.</li>
<li>Use <em>common item summary functions</em> with <a href="https://rlang.r-lib.org/">rlang</a>’s <a href="http://rlang.r-lib.org/reference/quasiquotation.html">unquoting</a> mechanism. Example: <code>. %&gt;% summarise_player(!!!summary_funs["mean_score"])</code>.</li>
</ul>
</li>
<li>
<strong>Compute Head-to-Head values</strong> (a summary statistic of direct confrontation between two players) with functions also using <code>dplyr</code>’s grammar:
<ul>
<li>Store output in <em>long format</em> as a <code>tibble</code> with one row per pair of players. Function: <code><a href="reference/h2h_long.html">h2h_long()</a></code>.</li>
<li>Store output in <em>matrix format</em> as a matrix with rows and columns describing players and entries - Head-to-Head values. Function: <code><a href="reference/h2h_mat.html">h2h_mat()</a></code>.</li>
<li>Use <em>common Head-to-Head functions</em> with rlang’s unquoting mechanism. Example: <code>. %&gt;% h2h_mat(!!!h2h_funs["num_wins"])</code>.</li>
</ul>
</li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install <code>comperes</code> from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><code class = "r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"comperes"</span>)</code></pre></div>
<p>To install the most recent development version from GitHub use:</p>
<div class="sourceCode" id="cb2"><pre class="r"><code class = "r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"echasnovski/comperes"</span>)</code></pre></div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="store-and-convert" class="section level3">
<h3 class="hasAnchor">
<a href="#store-and-convert" class="anchor"></a>Store and Convert</h3>
<p>We will be using <code>ncaa2005</code>, data from <code>comperes</code> package. It is an example competition results (hereafter - results) of an isolated group of Atlantic Coast Conference teams provided in book <a href="https://www.amazon.com/Whos-1-Science-Rating-Ranking/dp/069116231X">“Who’s #1”</a> by Langville and Meyer. It looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="r"><code class = "r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">comperes</span>)
<span class="no">ncaa2005</span>
<span class="co">#&gt; # A longcr object:</span>
<span class="co">#&gt; # A tibble: 20 x 3</span>
<span class="co">#&gt;    game player score</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1     1 Duke       7</span>
<span class="co">#&gt; 2     1 Miami     52</span>
<span class="co">#&gt; 3     2 Duke      21</span>
<span class="co">#&gt; 4     2 UNC       24</span>
<span class="co">#&gt; 5     3 Duke       7</span>
<span class="co">#&gt; 6     3 UVA       38</span>
<span class="co">#&gt; # … with 14 more rows</span></code></pre></div>
<p>This is an object of class <code>longcr</code> which describes results in long form (<em>each row represents the score of particular player in particular game</em>). Because in this competition a game always consists from two players, more natural way to look at <code>ncaa2005</code> is in wide format:</p>
<div class="sourceCode" id="cb4"><pre class="r"><code class = "r"><span class="fu"><a href="reference/widecr.html">as_widecr</a></span>(<span class="no">ncaa2005</span>)
<span class="co">#&gt; # A widecr object:</span>
<span class="co">#&gt; # A tibble: 10 x 5</span>
<span class="co">#&gt;    game player1 score1 player2 score2</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;    &lt;int&gt;</span>
<span class="co">#&gt; 1     1 Duke         7 Miami       52</span>
<span class="co">#&gt; 2     2 Duke        21 UNC         24</span>
<span class="co">#&gt; 3     3 Duke         7 UVA         38</span>
<span class="co">#&gt; 4     4 Duke         0 VT          45</span>
<span class="co">#&gt; 5     5 Miami       34 UNC         16</span>
<span class="co">#&gt; 6     6 Miami       25 UVA         17</span>
<span class="co">#&gt; # … with 4 more rows</span></code></pre></div>
<p>This converted <code>ncaa2005</code> into an object of <code>widecr</code> class which describes results in wide format (<em>each row represents scores of all players in particular game</em>). All <code>comperes</code> functions expect either a data frame with results structured in long format or one of supported classes: <code>longcr</code>, <code>widecr</code>.</p>
</div>
<div id="summarise" class="section level3">
<h3 class="hasAnchor">
<a href="#summarise" class="anchor"></a>Summarise</h3>
<p>With <code>compere</code> the following summaries are possible:</p>
<div class="sourceCode" id="cb5"><pre class="r"><code class = "r"><span class="no">ncaa2005</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/item-summary.html">summarise_player</a></span>(<span class="kw">min_score</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(<span class="no">score</span>), <span class="kw">mean_score</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">score</span>))
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;   player min_score mean_score</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;int&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Duke           0       8.75</span>
<span class="co">#&gt; 2 Miami         25      34.5 </span>
<span class="co">#&gt; 3 UNC            3      12.5 </span>
<span class="co">#&gt; 4 UVA            5      18.5 </span>
<span class="co">#&gt; 5 VT             7      33.5</span>

<span class="co"># Using list of common summary functions</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rlang</span>)
<span class="no">ncaa2005</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/item-summary.html">summarise_game</a></span>(!!!<span class="no">summary_funs</span>[<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"sum_score"</span>, <span class="st">"num_players"</span>)])
<span class="co">#&gt; # A tibble: 10 x 3</span>
<span class="co">#&gt;    game sum_score num_players</span>
<span class="co">#&gt;   &lt;int&gt;     &lt;int&gt;       &lt;int&gt;</span>
<span class="co">#&gt; 1     1        59           2</span>
<span class="co">#&gt; 2     2        45           2</span>
<span class="co">#&gt; 3     3        45           2</span>
<span class="co">#&gt; 4     4        45           2</span>
<span class="co">#&gt; 5     5        50           2</span>
<span class="co">#&gt; 6     6        42           2</span>
<span class="co">#&gt; # … with 4 more rows</span></code></pre></div>
<p>Supplied list of common summary functions has 8 entries, which are quoted expressions to be used in <code>dplyr</code> grammar:</p>
<div class="sourceCode" id="cb6"><pre class="r"><code class = "r"><span class="no">summary_funs</span>
<span class="co">#&gt; $min_score</span>
<span class="co">#&gt; min(score)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $max_score</span>
<span class="co">#&gt; max(score)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mean_score</span>
<span class="co">#&gt; mean(score)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $median_score</span>
<span class="co">#&gt; median(score)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sd_score</span>
<span class="co">#&gt; sd(score)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sum_score</span>
<span class="co">#&gt; sum(score)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $num_games</span>
<span class="co">#&gt; length(unique(game))</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $num_players</span>
<span class="co">#&gt; length(unique(player))</span>

<span class="no">ncaa2005</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="reference/item-summary.html">summarise_player</a></span>(!!!<span class="no">summary_funs</span>)
<span class="co">#&gt; # A tibble: 5 x 9</span>
<span class="co">#&gt;   player min_score max_score mean_score median_score sd_score sum_score</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;int&gt;     &lt;int&gt;      &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 Duke           0        21       8.75          7       8.81        35</span>
<span class="co">#&gt; 2 Miami         25        52      34.5          30.5    12.3        138</span>
<span class="co">#&gt; 3 UNC            3        24      12.5          11.5     9.40        50</span>
<span class="co">#&gt; 4 UVA            5        38      18.5          15.5    14.0         74</span>
<span class="co">#&gt; 5 VT             7        52      33.5          37.5    19.9        134</span>
<span class="co">#&gt; # … with 2 more variables: num_games &lt;int&gt;, num_players &lt;int&gt;</span></code></pre></div>
<p>To modify scores based on the rest of results one can use <code>join_*_summary()</code> functions:</p>
<div class="sourceCode" id="cb7"><pre class="r"><code class = "r"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>))
<span class="no">ncaa2005_mod</span> <span class="kw">&lt;-</span> <span class="no">ncaa2005</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/item-summary-join.html">join_player_summary</a></span>(<span class="kw">player_mean_score</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">score</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/item-summary-join.html">join_game_summary</a></span>(<span class="kw">game_mean_score</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">score</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">score</span> <span class="kw">=</span> <span class="no">player_mean_score</span> - <span class="no">game_mean_score</span>)

<span class="no">ncaa2005_mod</span>
<span class="co">#&gt; # A longcr object:</span>
<span class="co">#&gt; # A tibble: 20 x 5</span>
<span class="co">#&gt;    game player score player_mean_score game_mean_score</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;             &lt;dbl&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 Duke   -20.8              8.75            29.5</span>
<span class="co">#&gt; 2     1 Miami    5               34.5             29.5</span>
<span class="co">#&gt; 3     2 Duke   -13.8              8.75            22.5</span>
<span class="co">#&gt; 4     2 UNC    -10               12.5             22.5</span>
<span class="co">#&gt; 5     3 Duke   -13.8              8.75            22.5</span>
<span class="co">#&gt; 6     3 UVA     -4               18.5             22.5</span>
<span class="co">#&gt; # … with 14 more rows</span>

<span class="no">ncaa2005_mod</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="reference/item-summary.html">summarise_player</a></span>(<span class="kw">mean_score</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">score</span>))
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   player mean_score</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Duke       -15.5 </span>
<span class="co">#&gt; 2 Miami       11.4 </span>
<span class="co">#&gt; 3 UNC         -5   </span>
<span class="co">#&gt; 4 UVA         -2.12</span>
<span class="co">#&gt; 5 VT          11.2</span></code></pre></div>
<p>This code modifies <code>score</code> to be average player score minus average game score. Negative values indicate poor game performance.</p>
</div>
<div id="head-to-head" class="section level3">
<h3 class="hasAnchor">
<a href="#head-to-head" class="anchor"></a>Head-to-Head</h3>
<p>Computation of Head-to-Head performance is done with <code><a href="reference/h2h_long.html">h2h_long()</a></code> (output is a tibble; allows multiple Head-to-Head values per pair of players) or <code><a href="reference/h2h_mat.html">h2h_mat()</a></code> (output is a matrix; only one value per pair of players).</p>
<p>Head-to-Head functions should be supplied in <code>dplyr</code> grammar but for players’ matchups: direct confrontation between <strong>ordered</strong> pairs of players (including playing with themselves) stored in wide format:</p>
<div class="sourceCode" id="cb8"><pre class="r"><code class = "r"><span class="no">ncaa2005</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="reference/get_matchups.html">get_matchups</a></span>()
<span class="co">#&gt; # A widecr object:</span>
<span class="co">#&gt; # A tibble: 40 x 5</span>
<span class="co">#&gt;    game player1 score1 player2 score2</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;    &lt;int&gt;</span>
<span class="co">#&gt; 1     1 Duke         7 Duke         7</span>
<span class="co">#&gt; 2     1 Duke         7 Miami       52</span>
<span class="co">#&gt; 3     1 Miami       52 Duke         7</span>
<span class="co">#&gt; 4     1 Miami       52 Miami       52</span>
<span class="co">#&gt; 5     2 Duke        21 Duke        21</span>
<span class="co">#&gt; 6     2 Duke        21 UNC         24</span>
<span class="co">#&gt; # … with 34 more rows</span></code></pre></div>
<p>Typical Head-to-Head computation is done like this:</p>
<div class="sourceCode" id="cb9"><pre class="r"><code class = "r"><span class="no">ncaa2005</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/h2h_long.html">h2h_long</a></span>(
    <span class="kw">mean_score_diff</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">score1</span> - <span class="no">score2</span>),
    <span class="kw">num_wins</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">score1</span> <span class="kw">&gt;</span> <span class="no">score2</span>)
  )
<span class="co">#&gt; # A long format of Head-to-Head values:</span>
<span class="co">#&gt; # A tibble: 25 x 4</span>
<span class="co">#&gt;   player1 player2 mean_score_diff num_wins</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;             &lt;dbl&gt;    &lt;int&gt;</span>
<span class="co">#&gt; 1 Duke    Duke                  0        0</span>
<span class="co">#&gt; 2 Duke    Miami               -45        0</span>
<span class="co">#&gt; 3 Duke    UNC                  -3        0</span>
<span class="co">#&gt; 4 Duke    UVA                 -31        0</span>
<span class="co">#&gt; 5 Duke    VT                  -45        0</span>
<span class="co">#&gt; 6 Miami   Duke                 45        1</span>
<span class="co">#&gt; # … with 19 more rows</span>

<span class="no">ncaa2005</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="reference/h2h_mat.html">h2h_mat</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">score1</span> - <span class="no">score2</span>))
<span class="co">#&gt; # A matrix format of Head-to-Head values:</span>
<span class="co">#&gt;       Duke Miami UNC UVA  VT</span>
<span class="co">#&gt; Duke     0   -45  -3 -31 -45</span>
<span class="co">#&gt; Miami   45     0  18   8  20</span>
<span class="co">#&gt; UNC      3   -18   0   2 -27</span>
<span class="co">#&gt; UVA     31    -8  -2   0 -38</span>
<span class="co">#&gt; VT      45   -20  27  38   0</span></code></pre></div>
<p>Supplied list of common Head-to-Head functions has 9 entries, which are also quoted expressions:</p>
<div class="sourceCode" id="cb10"><pre class="r"><code class = "r"><span class="no">h2h_funs</span>
<span class="co">#&gt; $mean_score_diff</span>
<span class="co">#&gt; mean(score1 - score2)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mean_score_diff_pos</span>
<span class="co">#&gt; max(mean(score1 - score2), 0)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mean_score</span>
<span class="co">#&gt; mean(score1)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sum_score_diff</span>
<span class="co">#&gt; sum(score1 - score2)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sum_score_diff_pos</span>
<span class="co">#&gt; max(sum(score1 - score2), 0)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sum_score</span>
<span class="co">#&gt; sum(score1)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $num_wins</span>
<span class="co">#&gt; num_wins(score1, score2, half_for_draw = FALSE)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $num_wins2</span>
<span class="co">#&gt; num_wins(score1, score2, half_for_draw = TRUE)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $num</span>
<span class="co">#&gt; dplyr::n()</span>

<span class="no">ncaa2005</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="reference/h2h_long.html">h2h_long</a></span>(!!!<span class="no">h2h_funs</span>)
<span class="co">#&gt; # A long format of Head-to-Head values:</span>
<span class="co">#&gt; # A tibble: 25 x 11</span>
<span class="co">#&gt;   player1 player2 mean_score_diff mean_score_diff… mean_score sum_score_diff</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;             &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;          &lt;int&gt;</span>
<span class="co">#&gt; 1 Duke    Duke                  0                0       8.75              0</span>
<span class="co">#&gt; 2 Duke    Miami               -45                0       7               -45</span>
<span class="co">#&gt; 3 Duke    UNC                  -3                0      21                -3</span>
<span class="co">#&gt; 4 Duke    UVA                 -31                0       7               -31</span>
<span class="co">#&gt; 5 Duke    VT                  -45                0       0               -45</span>
<span class="co">#&gt; 6 Miami   Duke                 45               45      52                45</span>
<span class="co">#&gt; # … with 19 more rows, and 5 more variables: sum_score_diff_pos &lt;dbl&gt;,</span>
<span class="co">#&gt; #   sum_score &lt;int&gt;, num_wins &lt;dbl&gt;, num_wins2 &lt;dbl&gt;, num &lt;int&gt;</span></code></pre></div>
<p>To compute Head-to-Head for only subset of players or include values for players that are not in the results, use factor <code>player</code> column:</p>
<div class="sourceCode" id="cb11"><pre class="r"><code class = "r"><span class="no">ncaa2005</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">player</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">player</span>, <span class="kw">levels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Duke"</span>, <span class="st">"Miami"</span>, <span class="st">"Extra"</span>))) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/h2h_mat.html">h2h_mat</a></span>(!!!<span class="no">h2h_funs</span>[<span class="st">"num_wins"</span>], <span class="kw">fill</span> <span class="kw">=</span> <span class="fl">0</span>)
<span class="co">#&gt; # A matrix format of Head-to-Head values:</span>
<span class="co">#&gt;       Duke Miami Extra</span>
<span class="co">#&gt; Duke     0     0     0</span>
<span class="co">#&gt; Miami    1     0     0</span>
<span class="co">#&gt; Extra    0     0     0</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=comperes">https://​cloud.r-project.org/​package=comperes</a>
</li>
<li>Browse source code at <br><a href="https://github.com/echasnovski/comperes/">https://​github.com/​echasnovski/​comperes/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/echasnovski/comperes/issues">https://​github.com/​echasnovski/​comperes/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Evgeni Chasnovski <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/echasnovski/comperes"><img src="https://travis-ci.org/echasnovski/comperes.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/echasnovski/comperes"><img src="https://codecov.io/gh/echasnovski/comperes/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://cran.r-project.org/package=comperes"><img src="https://www.r-pkg.org/badges/version/comperes?color=blue" alt="CRAN"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
